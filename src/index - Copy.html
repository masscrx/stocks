<!DOCTYPE html>
<html ng-app="myApp">
<head>
    <title>Stock prices</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/style.css">
    <link rel="stylesheet" href="bower_components/nvd3/build/nv.d3.min.css">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans">
    <link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.css">

</head>
<body ng-cloak>
  <div class="container-fluid" ng-controller="StocksController">
    <div class="row">
      <div class="col-sm-3 col-md-2 stock-list">
          <p ng-repeat="tick in tickers track by $index">
            {{tick}} 
            <span class="pull-right">
              <i class="fa fa-plus-square clickable" ng-click="addStock(tick)"></i>
              <i class="fa fa-minus-square clickable" ng-click="delStock(tick)"></i>
            </span>
          </p>
      </div>

      <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
        <!-- Stocks list for small devices -->
        <div class="row stocks-list-mobile">
          <div class="col-sm-12">
            <uib-accordion close-others="oneAtATime">
              <div uib-accordion-group class="panel-default" is-open="status.open">
                <uib-accordion-heading>
                  Stocks list
                  <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i>
                </uib-accordion-heading>
                <table class="table table-hover table-condensed">
                  <thead>
                    <tr>
                      <th>Company symbol</th>
                      <th class="text-center">Add</th>
                      <th class="text-center">Remove</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr ng-repeat="tick in tickers track by $index">
                      <td>{{ tick }}</td>
                      <td class="text-center"><i class="fa fa-plus-square clickable" ng-click="addStock(tick)"></i></td>
                      <td class="text-center"><i class="fa fa-minus-square clickable" ng-click="delStock(tick)"></i></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </uib-accordion>
          </div>
        </div>
        <!-- END -->
        
        <!-- Overall chart -->
        <div class="row ver-space">
          <div class="col-md-12">
            <div class="portlet">
              <div class="portlet-header">
                <h3><i class="fa fa-bar-chart-o"></i>Overall chart</h3>
              </div>
              <div class="portlet-content">
                <div class="row">
                  <div class="col-md-5 col-sm-12 col-md-offset-1">
                    <div class="form-inline">
                      <div class="form-group">
                        <div class="input-group">
                          <div class="input-group-addon">From</div>
                          <input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="startDate" 
                            is-open="popup1.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats" ng-change="reloadStocksData()"/>
                          <div class="input-group-addon"><i class="glyphicon glyphicon-calendar" ng-click="open1()"></i></div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-5 col-sm-12 col-md-offset-1">
                    <div class="form-inline">
                      <div class="form-group">
                        <div class="input-group">
                          <div class="input-group-addon">To</div>
                          <input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="endDate" 
                            is-open="popup2.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats" ng-change="reloadStocksData()"/>
                          <div class="input-group-addon"><i class="glyphicon glyphicon-calendar" ng-click="open2()"></i></div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-12">
                    <nvd3 class="with-3d-shadow with-transitions" options="options.overallChart" data="stocks" api="apiOverallChart"></nvd3>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- END -->

        <!-- Stock details -->
        <div class="row">
          <div class="col-md-12">
            <uib-accordion close-others="oneAtATime" ng-repeat="stock in stocks">
              <div uib-accordion-group class="panel-default" is-open="status.open">
                <uib-accordion-heading>
                  <i class="fa fa-bar-chart-o"></i> {{ stock.key }} - detailed information
                  <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i>
                </uib-accordion-heading>
                <table class="table table-hover table-condensed">
                  <thead>
                    <tr>
                      <th>Date</th>
                      <th>Low price</th>
                      <th>High price</th>
                      <th>Open</th>
                      <th>Close</th>
                      <th>Volume</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr ng-repeat="day in stock.values">
                      <td>{{ day.date | date : "mediumDate" }}</td>
                      <td class="text-low">{{ day.low | currency:"$"}}</td>
                      <td class="text-high">{{ day.high | currency:"$"}}</td>
                      <td class="text-open">{{ day.open | currency:"$"}}</td>
                      <td class="text-close">{{ day.close | currency:"$"}}</td>
                      <td>{{ day.volume | number }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </uib-accordion>
          </div>          
        </div>        
        <!-- END -->
      </div>
    </div>
  </div>

  <script src="bower_components/angular/angular.min.js"></script>
  <script src="bower_components/angular-bootstrap/ui-bootstrap-tpls.js"></script>
  <script src="bower_components/d3/d3.min.js"></script>
  <script src="bower_components/nvd3/build/nv.d3.min.js"></script>
  <script src="bower_components/angular-nvd3/dist/angular-nvd3.min.js"></script>
  
  <script src="app/app.module.js"></script>
  <script src="app/stocks.controller.js"></script>
  <script src="app/data.service.js"></script>
</body>
</html>